import{C as i,a as E,h as l,E as a}from"./headers-Dul6VsrZ.js";async function T(e){e.preventDefault();try{const o=d(i);await S(o)}catch(o){n(o)}}function d(e){const o=new FormData(e),t=Object.fromEntries(o),r=t.tags.split(",").map(c=>c.trim()),s=t.media?{url:t.media,alt:t.alt}:null;return{title:t.title,body:t.body,tags:r,media:s}}async function S(e){if(!localStorage.getItem("accessToken"))throw new Error("No access token found. Please log in.");try{const t=await fetch(E,{method:"POST",headers:l(),body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create post");const r=await t.json();return alert("Post created successfully"),window.location.href="/profile/",r}catch(t){n(t)}}function n(e){console.error("Error:",e),a?a.textContent=`Error: ${e.message||"Something went wrong"}`:alert(`Error: ${e.message||"Something went wrong"}`)}export{T as g,n as h};
